(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{372:function(e,s,t){Promise.resolve().then(t.bind(t,6277))},352:function(e,s,t){"use strict";var n=t(7437),a=t(2265),r=t(2099),i=t(2253);t(1099),s.Z=e=>{let{children:s,at:t,onClose:l}=e,c=window.innerHeight,[o]=(0,a.useState)(c),[d,u]=(0,a.useState)(),[{y:m},h]=(0,r.q_)(()=>({y:o}));(0,a.useEffect)(()=>{h({y:150})},[h]);let g=(0,i.c0)(e=>{let{down:s,movement:[,t],memo:n=m.get()}=e;return s?(u("on-drag"),h({y:t+n})):(console.log("********** TOP/Bottom Scroll : ",t+n,c-50),t+n<200?(h({y:0}),u("fully-visible")):(u("visible"),t+n>c-50&&(h({y:c}),u(""),l()))),n});return(0,n.jsxs)(r.q.div,{className:"drawer ".concat(t," ").concat(d),...g(),style:{y:m},children:[(0,n.jsx)("div",{className:"drawer-handle"}),(0,n.jsx)("div",{className:"drawer-content",children:s})]})}},14:function(e,s,t){"use strict";var n=t(7437);t(932),s.Z=()=>{let e={"--clr":"#00ff0a"};return(0,n.jsxs)("div",{className:"ring",children:[(0,n.jsx)("i",{style:e}),(0,n.jsx)("i",{style:e}),(0,n.jsx)("i",{style:e})]})}},1365:function(e,s,t){"use strict";var n=t(7437),a=t(2265),r=t(6820),i=t.n(r),l=t(5097),c=t(6356);t(7305),s.Z=e=>{let{onClose:s,onImageProcess:t}=e,r=(0,a.useRef)(null),[o,d]=(0,a.useState)(null),[u,m]=(0,a.useState)("environment");(0,a.useEffect)(()=>{if(r.current){var e;let s=null===(e=r.current.video.srcObject)||void 0===e?void 0:e.getVideoTracks()[0];s&&s.applyConstraints({facingMode:u})}},[u]),(0,a.useEffect)(()=>{o&&t(o)},[o]);let h=(0,a.useCallback)(()=>{let e=r.current.getScreenshot();d({fileNameWithExtension:"capture.".concat(g(e.split(",")[0])),baseFormatFile:e,fromCamera:!0})},[r]),g=e=>{let s=e.match(/^data:image\/(\w+);base64/);if(s&&s[1])return s[1];console.log("No match found or invalid data URL.")};return(0,n.jsxs)("div",{className:"webcam-container",children:[o?(0,n.jsx)("img",{src:o.baseFormatFile,alt:"webcam",className:"custom-webcam ".concat((null==o?void 0:o.fromCamera)?"camera":"")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{className:"custom-webcam",videoConstraints:{facingMode:u},ref:r}),(0,n.jsx)("div",{className:"layer"})]}),(0,n.jsx)("div",{className:"btn-container",children:o?(0,n.jsx)("button",{onClick:()=>{d(null)},children:"Retake"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"browse-btn",children:[(0,n.jsx)("input",{type:"file",id:"file-input",className:"file-input",accept:"image/*",title:"Upload Image",onChange:e=>{let s=e.target.files[0];if(console.log("******** Handle file : ",s.name),s&&s.type.startsWith("image/")){let e=new FileReader;e.onload=function(e){d({fileNameWithExtension:s.name,baseFormatFile:e.target.result})},e.readAsDataURL(s)}}}),(0,n.jsx)(c.bNi,{})]}),(0,n.jsx)("button",{className:"capture-btn",onClick:h,children:(0,n.jsx)(l.xue,{})})]})})]})}},6277:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var n=t(7437),a=t(7138);t(9237);var r=t(1365),i=t(2265),l=t(14),c=t(352),o=t(8472),d=t(5345),u=t(7692),m=t(3051),h=e=>{let{imageType:s,productInformation:t,allergyAnalysis:a}=e,[r,l]=(0,i.useState)(!1);console.log(t.otherDetails);let c=t.otherDetails.split(","),o=(0,n.jsxs)("div",{className:"product-content",children:[t.ingredients.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Ingredients Used:"})," ",(0,n.jsxs)("p",{children:["  ",t.ingredients.join(", ")]})]}),t.benefits.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Benefits"}),(0,n.jsx)("ul",{children:t.benefits.map((e,s)=>(0,n.jsx)("li",{children:e},s))})]}),t.otherDetails.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Other Details"}),(0,n.jsx)("ul",{children:c.map((e,s)=>(0,n.jsx)("li",{children:e},s))})]})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"identifier",children:(0,n.jsx)("span",{children:s})}),(0,n.jsxs)("div",{className:"product-title",children:[(0,n.jsxs)("h2",{className:"heading",children:[" ",t.productName," "]}),t.productType&&(0,n.jsxs)("p",{className:"sub-heading",children:["Product Type: ",(0,n.jsx)("span",{children:t.productType})]})]}),(0,n.jsxs)("div",{className:"detection-area",children:[a.isProductRecommended?(0,n.jsx)("p",{className:"success-message",children:"No Allergic Content Detected!"}):a.allergicSubstances.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Allergic Substances: "}),(0,n.jsx)("ul",{children:a.allergicSubstances.map((e,s)=>(0,n.jsx)("li",{children:e},s))})]}):(0,n.jsx)("p",{className:"warning-message",children:"No Allergic Content Detected! Although not Recommended"}),(null==a?void 0:a.productRecommendationSummary)&&(0,n.jsxs)("p",{children:[(0,n.jsx)(m.ZEA,{}),null==a?void 0:a.productRecommendationSummary]})]}),(0,n.jsx)("button",{className:"link",onClick:()=>l(!r),children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.zHG,{}),"Hide Additional Information"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.ndN,{}),"Additional Information"]})}),r&&o]})},g=e=>{var s;let{product:t}=e,a=!!t.imageType&&null!=t&&null!==(s=t.productInformation)&&void 0!==s&&!!s.productName;return(0,n.jsx)("div",{className:"product",children:a?(0,n.jsx)(h,{imageType:t.imageType,productInformation:t.productInformation,allergyAnalysis:t.allergyAnalysis}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"identifier",children:(0,n.jsxs)("h2",{children:[t.imageType," "]})}),(0,n.jsx)("div",{className:"product-content",children:(0,n.jsx)("p",{children:null==t?void 0:t.imageDescription})})]})})},x=t(5980),p={src:"/_next/static/media/server_down.f14e5012.svg"},j=t(3872),f=()=>{let[e,s]=(0,i.useState)(!1),[t,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1),[f,v]=(0,i.useState)(null),[N,y]=(0,i.useState)({isError:!1,message:""});(0,i.useEffect)(()=>{console.log("**** Dashboard"),b()},[]);let b=async()=>{var e;let s=(0,d.G)("userID"),t="Bearer ".concat((0,d.G)("token")),n=await o.Z.get("".concat(x.Z.USER_API,"/").concat(s),{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:t}});(0,d.t_)("user",JSON.stringify(null===(e=n.data)||void 0===e?void 0:e.response))},S=async e=>{if(v(null),!e){alert("Please capture an image first.");return}try{var s,t;u(!0),h(!0),y({isError:!1,message:""});let n=(0,d.G)("userID"),a="Bearer ".concat((0,d.G)("token")),r=await o.Z.post("".concat(x.Z.UPLOAD_API,"/").concat(n),{baseFormatFile:e.baseFormatFile.split(",")[1],fileNameWithExtension:e.fileNameWithExtension},{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:a}});v((0,d.xd)(null===(s=r.data)||void 0===s?void 0:s.response)),console.log("******** Server Response: ",(0,d.xd)(null===(t=r.data)||void 0===t?void 0:t.response)),h(!1)}catch(e){h(!1),y({isError:!0,message:e.message}),console.error("Upload error:",e)}};return(0,n.jsxs)("div",{className:"dashboard",children:[(0,n.jsx)(r.Z,{onImageProcess:S}),(0,n.jsx)("div",{className:"actions",children:(0,n.jsx)(a.default,{className:"user-profile",href:"/user-profile",children:(0,n.jsx)(j.BKo,{})})}),t&&(0,n.jsx)(c.Z,{onClose:()=>{console.log("**** Close Drawer"),u(!1)},children:(0,n.jsxs)("div",{className:"process-container ".concat(m?"on-process":""),children:[m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{}),(0,n.jsx)("p",{children:"Processing..."})]}),N.isError&&(0,n.jsxs)(n.Fragment,{children:[N.message,(0,n.jsx)("img",{src:p.src,alt:"Logo",className:"error-image"})]}),f&&(0,n.jsx)(g,{product:f})]})})]})}},5980:function(e,s){"use strict";let t="http://identifier.us-east-1.elasticbeanstalk.com";s.Z={REGISTER_API:"".concat(t,"/api/user/register"),LOGIN_API:"".concat(t,"/api/user/login"),UPLOAD_API:"".concat(t,"/api/allergy/check"),USER_API:"".concat(t,"/api/user"),USER_UPDATE_API:"".concat(t,"/api/user/update")}},5345:function(e,s,t){"use strict";function n(e){let s;let t=/```json\s*([\s\S]*?)\s*```/g,n={};for(;null!==(s=t.exec(e));)try{n={...n,...JSON.parse(s[1])},console.log("DDD: ",n)}catch(e){console.error("Failed to parse JSON:",e)}return console.log("**** Data: ",n),n}t.d(s,{G:function(){return r},LQ:function(){return i},t_:function(){return a},xd:function(){return n}});let a=(e,s)=>{sessionStorage.setItem(e,s)},r=e=>sessionStorage.getItem(e);function i(e){let s=new Date(e),t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(a)}},1099:function(){},932:function(){},7305:function(){},9237:function(){}},function(e){e.O(0,[631,566,51,706,522,665,240,138,316,936,971,190,744],function(){return e(e.s=372)}),_N_E=e.O()}]);