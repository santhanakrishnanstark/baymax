(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{2879:function(e,a,t){Promise.resolve().then(t.bind(t,2321))},352:function(e,a,t){"use strict";var s=t(7437),r=t(2265),l=t(2099),i=t(2253);t(1099),a.Z=e=>{let{children:a,at:t,onClose:n}=e,o=window.innerHeight,[c]=(0,r.useState)(o),[d,u]=(0,r.useState)(),[{y:m},h]=(0,l.q_)(()=>({y:c}));(0,r.useEffect)(()=>{h({y:150})},[h]);let p=(0,i.c0)(e=>{let{down:a,movement:[,t],memo:s=m.get()}=e;return a?(u("on-drag"),h({y:t+s})):(console.log("********** TOP/Bottom Scroll : ",t+s,o-50),t+s<200?(h({y:0}),u("fully-visible")):(u("visible"),t+s>o-50&&(h({y:o}),u(""),n()))),s});return(0,s.jsxs)(l.q.div,{className:"drawer ".concat(t," ").concat(d),...p(),style:{y:m},children:[(0,s.jsx)("div",{className:"drawer-handle"}),(0,s.jsx)("div",{className:"drawer-content",children:a})]})}},713:function(e,a,t){"use strict";var s=t(7437),r=t(2265),l=t(8472),i=t(6463),n=t(5980),o=t(5345);a.Z=()=>{let[e,a]=(0,r.useState)({email:"",password:""}),[t,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),m=(0,i.useRouter)(),h=async a=>{a.preventDefault(),c(!0),u("");try{let a=await l.Z.post(n.Z.LOGIN_API,JSON.stringify(e),{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(200===a.status){var t,s,r,i;(0,o.t_)("token",null===(s=a.data)||void 0===s?void 0:null===(t=s.response)||void 0===t?void 0:t.token),(0,o.t_)("userID",null===(i=a.data)||void 0===i?void 0:null===(r=i.response)||void 0===r?void 0:r.id),m.push("/dashboard")}}catch(e){u("Invalid email or password"),console.error("Login error:",e)}finally{c(!1)}};return(0,s.jsxs)("div",{className:"login-form",children:[(0,s.jsx)("h2",{children:"Login"}),(0,s.jsxs)("form",{children:[d&&(0,s.jsx)("p",{className:"error-text",children:d}),(0,s.jsxs)("div",{className:"form-item",children:[(0,s.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Enter your email",autoComplete:"username",onChange:t=>a({...e,email:t.target.value})}),(0,s.jsx)("p",{className:"error"})]}),(0,s.jsxs)("div",{className:"form-item",children:[(0,s.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Enter your password",autoComplete:"current-password",onChange:t=>a({...e,password:t.target.value})}),(0,s.jsx)("p",{className:"error"})]}),(0,s.jsx)("div",{className:"form-item mt-30",children:(0,s.jsx)("button",{className:"primary",onClick:h,disabled:t,children:t?"Logging in...":"Login"})})]})]})}},5980:function(e,a){"use strict";let t="http://identifier.us-east-1.elasticbeanstalk.com";a.Z={REGISTER_API:"".concat(t,"/api/user/register"),LOGIN_API:"".concat(t,"/api/user/login"),UPLOAD_API:"".concat(t,"/api/allergy/check"),USER_API:"".concat(t,"/api/user"),USER_UPDATE_API:"".concat(t,"/api/user/update")}},2321:function(e,a,t){"use strict";t.r(a);var s=t(7437),r=t(7138),l=t(9824);t(352),t(713);var i=t(2265);t(2892);var n=t(2047),o=t(8472),c=t(5980),d=t(5345);a.default=()=>{var e;let[a,t]=(0,i.useState)(),[u,m]=(0,i.useState)({firstName:"",lastName:"",email:"",password:"",phoneNumber:{number:"",country:""},dateOfBirth:"",gender:"",hasAllergies:!1,allergyList:[],allergicSubstances:[]}),[h,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)("");(0,i.useEffect)(()=>{var e;let a=JSON.parse((0,d.G)("user"));m({...a}),t(null==a?void 0:null===(e=a.phoneNumber)||void 0===e?void 0:e.number),a.hasAllergies?document.querySelector("#allergiesYes").checked=!0:document.querySelector("#allergiesYes").checked=!1,document.querySelector("#allergiesNo").checked=!1},[]),(0,i.useEffect)(()=>{console.log(u)},[u]);let x=(e,a)=>{switch(a){case"PHONE.NUMBER":var t;m({...u,phoneNumber:{number:e,country:e?null===(t=(0,n.SR)(e))||void 0===t?void 0:t.country:""}});break;case"HasAllergies":m({...u,[e.target.name]:"true"===e.target.value});break;default:if("ARRAY_TYPE"===a){let a=e.target.value;m({...u,[e.target.name]:a.split(",")})}else m({...u,[e.target.name]:e.target.value})}},v=async e=>{e.preventDefault(),p(!0),g("");try{(0,d.G)("userID");let e="Bearer ".concat((0,d.G)("token")),a=await o.Z.put(c.Z.USER_UPDATE_API,u,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:e},withCredentials:!0});console.log("Profile update successful:",a,a.data),alert("Profile Updated!")}catch(e){g("Invalid email or password"),console.error("Profile update error:",e)}finally{p(!1)}};return(0,s.jsxs)("main",{className:"register-form",children:[(0,s.jsx)("header",{children:(0,s.jsx)(r.default,{href:"/dashboard",children:(0,s.jsx)(l.u1R,{})})}),(0,s.jsxs)("h2",{children:["Hi ",null===(e=u.firstName)||void 0===e?void 0:e.toUpperCase(),"! "]}),(0,s.jsx)("div",{className:"sub-text",children:(0,s.jsx)("p",{children:"Keep your details up to date for a seamless experience."})}),(0,s.jsxs)("form",{children:[(0,s.jsx)("div",{className:"form-item",children:(0,s.jsx)("input",{type:"text",name:"firstName",id:"firstName",placeholder:"Enter your firstname",onChange:e=>x(e),defaultValue:u.firstName})}),(0,s.jsx)("div",{className:"form-item",children:(0,s.jsx)("input",{type:"text",name:"lastName",id:"lastName",placeholder:"Enter your last name",onChange:e=>x(e),defaultValue:u.lastName})}),(0,s.jsx)("div",{className:"form-item",children:(0,s.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Enter your email",autoComplete:"username",disabled:!0,onChange:e=>x(e),defaultValue:u.email})}),(0,s.jsx)("div",{className:"form-item",children:(0,s.jsx)(n.ZP,{placeholder:"Enter phone number",name:"phoneNumber",value:a,onChange:e=>x(e,"PHONE.NUMBER")})}),(0,s.jsx)("div",{className:"form-item",children:(0,s.jsx)("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",onChange:e=>x(e),defaultValue:(0,d.LQ)(u.dateOfBirth)})}),(0,s.jsxs)("div",{className:"form-item",children:[(0,s.jsx)("label",{children:"Do you have any allergies?"}),(0,s.jsxs)("div",{className:"d-flex-center",children:[(0,s.jsx)("input",{type:"radio",name:"hasAllergies",id:"allergiesYes",value:"true",onChange:e=>x(e,"HasAllergies")}),(0,s.jsx)("label",{htmlFor:"allergiesYes",children:"Yes"})]}),(0,s.jsxs)("div",{className:"d-flex-center",children:[(0,s.jsx)("input",{type:"radio",name:"hasAllergies",id:"allergiesNo",value:"false",onChange:e=>x(e,"HasAllergies")}),(0,s.jsx)("label",{htmlFor:"allergiesNo",children:"No"})]})]}),u.hasAllergies,u.hasAllergies&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"form-item",children:(0,s.jsx)("textarea",{name:"allergyList",id:"allergyList",placeholder:"Please list your allergies: (example: Peanuts, Fish, Soy, Shellfish)",rows:5,onChange:e=>x(e,"ARRAY_TYPE"),defaultValue:u.allergyList})}),(0,s.jsxs)("div",{className:"form-item",children:[(0,s.jsx)("label",{children:"Are there any specific substances or foods you are allergic to?"}),(0,s.jsx)("textarea",{name:"allergicSubstances",id:"allergicSubstances",placeholder:"Please list your allergic substances: (example: specific medications, food additives)",rows:5,onChange:e=>x(e,"ARRAY_TYPE"),defaultValue:u.allergicSubstances})]})]}),(0,s.jsx)("div",{className:"form-item mt-30",children:(0,s.jsx)("button",{className:"primary",onClick:v,disabled:h,children:h?"Updating...":"Update"})})]})]})}},5345:function(e,a,t){"use strict";function s(e){let a;let t=/```json\s*([\s\S]*?)\s*```/g,s={};for(;null!==(a=t.exec(e));)try{s={...s,...JSON.parse(a[1])},console.log("DDD: ",s)}catch(e){console.error("Failed to parse JSON:",e)}return console.log("**** Data: ",s),s}t.d(a,{G:function(){return l},LQ:function(){return i},t_:function(){return r},xd:function(){return s}});let r=(e,a)=>{sessionStorage.setItem(e,a)},l=e=>sessionStorage.getItem(e);function i(e){let a=new Date(e),t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(r)}},1099:function(){}},function(e){e.O(0,[566,452,138,316,674,971,190,744],function(){return e(e.s=2879)}),_N_E=e.O()}]);